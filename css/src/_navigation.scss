.menu .is-active > a,
.dropdown.menu > li.is-active > a {
	background-color: $whiter;
}

.submenu {
	li.linked > a:hover,
	li.linked > a:focus {
		background-color: $nav-bg-gray;
		transition: all .1s; // Fixes flicker in background color.
	}

	.unlinked > a {
		cursor: default;
		color: $maroon;
	}

	&.menu-depth-1 {
		padding: {
			left: .8rem;
			right: .8rem;
		}
	}

	.menu-item-has-children {
		padding: 0 .8rem;
	}
}

.dropdown .is-dropdown-submenu a {
	padding: 0.7rem 0.2rem;
}

.nav-primary {
	background-color: $whiter;
	clear: none;
	position: relative;

	a {
		&:hover {
			background-color: $nav-bg-gray;
		}
	}

	a,
	a:hover,
	li:hover a,
	li:hover .menu-depth-1 a,
	.menu-depth-1 a {
		color: $nav-blue;
	}

	.top-bar {
		&,
		ul {
			background-color: $whiter;
		}
	}

	.dropdown.menu > li {
		> a {
			position: relative;
		}

		&.is-active > a {
			color: $site-title-color;
		}
	}

	.menu-primary {
		position: static;
	}

	.is-dropdown-submenu.js-dropdown-active {
		display: flex;
	}

	.submenu {
		li {
			&,
			&:hover {
				border-left: none;
			}
		}

		li:not(.menu-item-has-children) {
			border-bottom: 1px dashed $dark-blue;
		}
	}

	// Row of submenu columns.
	.grid {

		&.is-dropdown-submenu-parent {
			position: static;
		}

		.is-dropdown-submenu.menu-depth-1 .is-dropdown-submenu-parent.opens-right > a::after {
			display: none;
		}

		.is-dropdown-submenu {
			min-width: auto;
		}

		.submenu {
			&.menu-depth-1 {
				width: 100%;
				flex: 0 0 auto;
				flex-wrap: nowrap;
			}

			&.menu-depth-2 {
				display: block;
				position: static;
			}
		}

		.submenu.menu-depth-1 > li:not(.menu-item-has-children) + li {
			border-top: none;
		}
	}

	.site-header & .title-bar-search {
		border-right: none;
		width: 100%;

		.search-icon {
			display: none;
		}
	}

	#header-search {
		position: relative;

		.site-header & {
			margin: {
				left: 0;
				right: 0;
			}
		}
	}

	@include breakpoint(medium) {
		background-color: $maroon;

		.site-header & {
			padding-left: $logo-width + $grid-padding-gutters / 2;
		}

		a,
		li:hover a {
			color: $whiter;
		}

		.unlinked > a {
			font-weight: bold;
		}

		.title-bars {
			align-self: flex-start;
		}

		.title-bar-search {
			position: relative;

			.site-header & .search-icon {
				height: $nav-height;
				display: inline-block;
			}
		}

		#header-search {
			position: absolute;
			bottom: 100%;
			right: -8px;
			background-color: $maroon;
			padding: .5rem;
			width: 225px;
		}

		.search-form {
			input[type="search"] {
				width: calc(100% - 34px);
				margin-right: 8px;
			}

			input[type="submit"] {
				background: {
					image: url("../images/search-agrilife-white.svg");
					position: center;
				}
				margin: 0;
				cursor: pointer;
				width: 26px;
			}
		}

		.top-bar {
			width: 100%;
		}

		.menu-primary {
			padding: {
				left: .2rem;
				right: 0;
			}

			> li {
				> a:hover,
				&.is-active > a {
					background-color: darken($maroon, 6%);
				}
			}
		}

		.submenu {
			li:not(.menu-item-has-children) {
				border-bottom: none;
			}

			li:not(.menu-item-has-children) + li {
				border-top: 1px dashed $dark-blue;
			}

			li:hover {
				border-left-color: darken($maroon, 6%);
			}
		}

		.is-stuck & {
			padding-left: $logo-width-stuck + $grid-padding-gutters / 2;

			.title-bar-search .search-icon {
				height: $nav-height-stuck;
			}

			.menu-primary {
				line-height: $nav-height-stuck;
			}

			.dropdown.menu > li > a {
				font-size: 14px;
				line-height: 1rem;
				padding: {
					top: $nav-item-padding-top-stuck;
					bottom: $nav-item-padding-top-stuck;
				}
			}

			.search-form input[type="submit"] {
				height: $nav-height-stuck;
				width: 22px;
			}
		}
	}
}

@include breakpoint(medium) {
	.menu .unlinked > a:hover {
		background-color: $whiter;
	}

	.nav-primary {
		.submenu .unlinked > a
		li:hover .submenu .unlinked > a {
			color: $maroon;
		}
	}
}
